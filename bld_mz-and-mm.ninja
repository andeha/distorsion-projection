#  bld_mz-and-mm.ninja | math routines for Pic32Mm and Pic32Mz a․𝘬․a 𝙨𝙢𝙖𝙡𝙡.

optflags = -g
archive = lib{$UNISON}.a
objs = ./.objs/7703a312-559A-42ca-A992-eabcf8f87663_$archive
sha1git = `git log -1 '--pretty=format:%h'`
include identic-common.ninja
cflags = {$PLATFLAGS} $moduleflags $optflags -DSHA1GIT=\"$sha1git\"

rule assemble-library
  command = ar rcs $out\_$sha1git.a $in                                    ; $
   ln -f $out\_$sha1git.a $out.a ; printf $sha1git

rule c
  command = clang $cflags -c $in -o $out
  description = C2x $out
  depfile = $out.d
  deps = gcc

build $archive: assemble-library $objs/calculator-sequent.o
build $objs/calculator-sequent.o: c calculator-sequent.c
default lib{$UNISON}.a

